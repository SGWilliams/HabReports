<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
	<meta name="pdfkit-page-size" content="Letter"/>
    <meta name="pdfkit-orientation" content="Landscape"/>

    <title>{{ title }}</title>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="html_files/stylesheet.css">
    {{pdf_css}}
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
 
    <script>

        $(function () {
		mv_dt = $('table.dataframe.ModelVariables').DataTable( 
                {
                    "columnDefs": [
                        {
                            "targets": [0],
                            "visible": false,
                            "orderable": true
                        },
                        {
                            "targets": [1],
                            "width": '200px',
							"classname": "rowheader"
                        }
                    ],
					order: [[0, 'asc']],
					autoWidth: false,
                    paging: false,

                    searching: false,
                    info: false,
                    createdRow: function ( row, data, index ) {

                       if ( data[1].replace(/[\$,]/g, '') == 'Distance Into (m)') {
                             $('th', row).eq(0).addClass('center');
                       }
                       if ( data[1].replace(/[\$,]/g, '') == 'Distance From (m)') {
                             $('th', row).eq(0).addClass('center');
                       }
                       if ( data[1].replace(/[\$,]/g, '') == 'Minimum (m)') {
                             $('th', row).eq(0).addClass('center');
                       }
                        if ( data[1].replace(/[\$,]/g, '') == 'Maximum (m)') {
                             $('th', row).eq(0).addClass('center');
                       }
                       if ( data[1].replace(/[\$,]/g, '') == 'Minimum Size (ha)') {
                             $('th', row).eq(0).addClass('center');
                       }
                       if ( data[1].replace(/[\$,]/g, '') == 'Ecotone Width (m)') {
                             $('th', row).eq(0).addClass('center');
                       }
                       if ( data[1].replace(/[\$,]/g, '') == 'Distance From Edge (m)') {
                             $('th', row).eq(0).addClass('center');
                       }
                       if ( data[1].replace(/[\$,]/g, '') == 'Elevation Limits') {
                             $('th', row).eq(0).addClass('left');
                       }
                       if ( data[1].replace(/[\$,]/g, '') == 'Hydrographic Limitations') {
                             $('th', row).eq(0).addClass('left');
                       }
                       if ( data[1].replace(/[\$,]/g, '') == 'Landcover Limitations') {
                             $('th', row).eq(0).addClass('left');
                       }
                       if (data[1].replace(/[\$,]/g, '') == 'Variable') {
                           $('th', row).eq(0).hide();
                       }
                   }
                });
            mu_dt = $('table.dataframe.MapUnits').DataTable(
                {
					autoWidth: false,
                    paging: false,
                    ordering: false,
                    searching: false,
                    info: false
                });
            cit_dt = $('table.dataframe.Citations').DataTable(
                {
                    "columnDefs": [
                        {
                            "targets": [0],
                            "visible": false,
                        }
                    ],
                    classname: "compact",
					autoWidth: false,
					paging: false,
                    ordering: false,
                    searching: false,
                    info: false
                });
		eds_dt = $('table.dataframe.Editors').DataTable(
                {
                    "columnDefs": [
                        {
                            "targets": [0],
                            "visible": false,
                        }
                    ],
                    autoWidth: false,
                    paging: false,
                    ordering: false,
                    searching: false,
                    info: false
                });

         $('table.dataframe.Editors').attr('border', '0');

				$('table.dataframe.Citations').attr('border', '0');
                $(".sorting, .sorting_asc, .sorting_desc").unbind('click');
                cols = mv_dt.columns()[0].length;
                var blankrow = mv_dt.row.add(create_row(1, '', cols)).draw().node();
                $( blankrow ).css( 'background-color', 'rgb(160, 160, 160)' );
                var headerrow = mv_dt.row.add(create_row(2, 'Landcover Limitations', cols)).draw().node();
                $( headerrow ).css( 'font-weight', 'bold' ).css( 'font-style', 'italic' ).css( 'background-color', 'rgb(195, 242, 184)' );
                blankrow = mv_dt.row.add(create_row(5, '', cols)).draw().node();
                $( blankrow ).css( 'background-color', 'rgb(230, 230, 230)' );
                blankrow = mv_dt.row.add(create_row(8, '', cols)).draw().node();
                $( blankrow ).css( 'background-color', 'rgb(230, 230, 230)' );
	            blankrow = mv_dt.row.add(create_row(11, '', cols)).draw().node();
                $( blankrow ).css( 'background-color', 'rgb(160, 160, 160)' );
                headerrow = mv_dt.row.add(create_row(12, 'Hydrographic Limitations', cols)).draw().node();
                $( headerrow ).css( 'font-weight', 'bold' ).css( 'font-style', 'italic' ).css( 'background-color', 'rgb(175, 214, 254)' );
                blankrow = mv_dt.row.add(create_row(16, '', cols)).draw().node();
                $( blankrow ).css( 'background-color', 'rgb(230, 230, 230)' );
                blankrow = mv_dt.row.add(create_row(20, '', cols)).draw().node();
                $( blankrow ).css( 'background-color', 'rgb(230, 230, 230)' );
                blankrow = mv_dt.row.add(create_row(24, '', cols)).draw().node();
                $( blankrow ).css( 'background-color', 'rgb(160, 160, 160)' );
                blankrow = mv_dt.row.add(create_row(26, '', cols)).draw().node();
                $( blankrow ).css( 'background-color', 'rgb(160, 160, 160)' );
                blankrow = mv_dt.row.add(create_row(28, '', cols)).draw().node();
                $( blankrow ).css( 'background-color', 'rgb(160, 160, 160)' );
	            blankrow = mv_dt.row.add(create_row(30, '', cols)).draw().node();
                $( blankrow ).css( 'background-color', 'rgb(160, 160, 160)' );
                var elevrow = mv_dt.row.add(create_row(31, 'Elevation Limits', cols)).draw().node();
                $( elevrow ).css( 'font-weight', 'bold' );
                blankrow = mv_dt.row.add(create_row(34, '', cols)).draw().node();
                $( blankrow ).css( 'background-color', 'rgb(160, 160, 160)' );
                blankrow = mv_dt.row.add(create_row(36, '', cols)).draw().node();
                $( blankrow ).css( 'background-color', 'rgb(160, 160, 160)' );
               mv_dt.draw();

               $("th:contains('Variable')").parent().hide();
               $("th:contains('ModellingMapUnit')").html("Map Unit");
               $("tr:contains('Map Unit')").css('background-color', 'rgb(255, 255, 255)');
               var colCount = mu_dt.columns().header().length;
               var text = '';
               for (i = 0; i < colCount; i++) {
                   text += "<th></th>";
               }
               $("#DataTables_Table_1 thead").append('<tr role="row"  style="background-color: rgb(160, 160, 160);">' + text + '</tr>');
			   var anywater = 'No';
			   if ($("tr:contains('Wet Vegetation'):contains('Yes')").length > 0) {
                  anywater = 'Yes' ;
               }
			   if ($("tr:contains('Flowing Water'):contains('Yes')").length > 0) {
                  anywater = 'Yes' ;
               }
			   if ($("tr:contains('Open/Standing Water'):contains('Yes')").length > 0) {
                  anywater = 'Yes' ;
               }
			   if (anywater == 'Yes') {
                   $("tr:contains('Wet Vegetation') td:empty, tr:contains('Flowing Water') td:empty, tr:contains('Open/Standing Water') td:empty").html("No");
			   }


        });
        function create_row(roworder, varname, cols) {
            var data = [];
            data.push(roworder);
            data.push(varname);
            for (i = 0; i < cols-2; i++) {
                data.push('');
            }
            return data;
        };

    </script>

</head>
<body style="border:0;margin:0;">
<main>

<div id="coverpage"></div>
<div id="usgscolorband">
    <div id="usgsidentifier">
        <a href="http://www.usgs.gov/" title="U.S. Geological Survey Home Page">
            <img src={{usgs_logo}} alt="USGS - science for a changing world"
                title="U.S. Geological Survey Home Page"/>
        </a>
    </div>
</div>

<h1 id="mainTitle">Species Habitat Model Report:</h1>
<div id="comNameCP">{{common_name}}</div>
<div id="sciNameCP">{{sci_name}}</div>
<div id="coverInfo">
    <b>Gap Analysis Program Species Code: </b> {{spp}} <br />
    <b>Integrated Taxonomic Information System TSN: </b> {{itis}} <br />
	<br />
    <b>Version: </b> CONUS_2001v1 <br /><br />
	<b>Model Creation: </b> 
	{{editors}}
 <br />
	<br />
    <b>DOI Data Link: </b> {{DOIpath}} <br />
    <b>ScienceBase Data Link: </b> {{SBpath}} <br />
	<br />
	<b>Date Report Generated: </b> {{tadaysdate}} <br />
	<br />
<!-- 	SOME KIND OF CITATION <br />
	OTHER INFORMATION? <br /> -->
</div>
         
<div class="pageBreak">
	<div style="clear:both;">
        <h2>Map of Predicted Habitat</h2>
        <div id="mapDiv">
            {{map_file}}
        </div>
    </div>
</div>

<div class="pageBreak">
	<h2>Habitat Modeling: Ancillary Parameters</h2>
	{{ modelling_variables_pvtable }}
    <div>
		<span class="regionCodes">
			GP = Great Plains;
			NE = Northeast;
			NW = Northwest;
			SE = Southeast;
			SW = Southwest;
			UM = Upper Midwest
		</span>
        <span class="downloadHint">
			More infomation regarding modeling process: https://gapanalysis.usgs.gov/species/data/download/
		</span>
    </div>
</div>

<div class="pageBreak">
	<h2 >Habitat Modeling: Map Units</h2>
	{{ modelling_mapunits_pvtable }}
    <div class="infoLine">
        <span class="regionCodes">
			GP = Great Plains;
			NE = Northeast;
			NW = Northwest;
			SE = Southeast;
			SW = Southwest;
			UM = Upper Midwest
		</span>
        <span class="downloadHint">
			More infomation regarding modeling process: https://gapanalysis.usgs.gov/species/data/download/
		</span>
    </div>
</div>

<div class="pageBreak">
        <h2>Citations</h2>
            {{ citations_table }}
</div>

</main>
</body>
</html>